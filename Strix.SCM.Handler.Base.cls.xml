<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="25">
<Class name="Strix.SCM.Handler.Base">
<Description>
Base class with common code for handlers.</Description>
<IncludeCode>Strix.SCM</IncludeCode>
<Super>%RegisteredObject</Super>
<TimeCreated>63864,78142.324488</TimeCreated>

<UDLText name="T">
<Content><![CDATA[
// ===== Studio callbacks, do-nothing implementations

]]></Content>
</UDLText>

<Method name="GetStatus">
<FormalSpec><![CDATA[InternalName:%String,&IsInSourceControl:%Boolean,&Editable:%Boolean,&IsCheckedOut:%Boolean,&UserCheckedOut:%String]]></FormalSpec>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
	Set IsInSourceControl = 0, Editable = 1
	Quit $$$OK
]]></Implementation>
</Method>

<Method name="IsInSourceControl">
<FormalSpec>InternalName:%String</FormalSpec>
<ReturnType>%Boolean</ReturnType>
<Implementation><![CDATA[	Quit 0
]]></Implementation>
</Method>

<Method name="OnMenuItem">
<FormalSpec><![CDATA[MenuName:%String,InternalName:%String,SelectedText:%String,&Enabled:%Boolean,&DisplayName:%String]]></FormalSpec>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
	Set Enabled = 1
	Quit $$$OK
]]></Implementation>
</Method>

<Method name="UserAction">
<Description>
Studio callback: user did something.</Description>
<FormalSpec><![CDATA[Type:%Integer,Name:%String,InternalName:%String,SelectedText:%String,&Action:%String,&Target:%String,&Msg:%String,&Reload:%Boolean]]></FormalSpec>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
	Set Action = 0, Target = "", Msg = "", Reload = 0
	Quit $$$OK
]]></Implementation>
</Method>

<Method name="AfterUserAction">
<FormalSpec><![CDATA[Type:%Integer,Name:%String,InternalName:%String,Answer:%Integer,Msg:%String="",&Reload:%Boolean]]></FormalSpec>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[	Quit $$$OK
]]></Implementation>
</Method>

<UDLText name="T">
<Content><![CDATA[
// ===== Menus and menu items

]]></Content>
</UDLText>

<Method name="GetMainMenus">
<Description>
Returns a list with the top level menus appropriate for this
handler. These are shared between handlers (unless overridden).
Used by the Studio plugin.</Description>
<ClassMethod>1</ClassMethod>
<FormalSpec>*Status:%Status</FormalSpec>
<ReturnType>%List</ReturnType>
<Implementation><![CDATA[
	Set Status = $$$OK
	;Call the menus "Source control", insert in both menu bar
	;and context menu.
	Set Menus = $lb($lb("Source control", 0), $lb("Source control", 1))
	Quit Menus
]]></Implementation>
</Method>

<Method name="GetMenuItems">
<Description>
Returns the menu items for a given menu and document</Description>
<ClassMethod>1</ClassMethod>
<FormalSpec>MenuName:%String,InternalName:%String,SelectedText:%String,*Status:%Status</FormalSpec>
<ReturnType>%List</ReturnType>
<Implementation><![CDATA[
	Set Status = $$$OK
	Set Items = ""
	Quit Items
]]></Implementation>
</Method>

<UDLText name="T">
<Content><![CDATA[
// ===== Helpers

]]></Content>
</UDLText>

<Method name="GetExplorerCommand">
<Description>
Returns a command to open explorer in the given directory. Optionally,
a file to pre-select can be specified.</Description>
<ClassMethod>1</ClassMethod>
<FormalSpec>Directory:%String,File:%String=""</FormalSpec>
<ReturnType>%String</ReturnType>
<Implementation><![CDATA[
	If File '= "" {
		Set Path = ##class(%File).SubDirectoryName(Directory, File)
		If '##class(%File).Exists(Path) Set File = ""
	}
	
	If File = "" {
		Set Cmd = "C:\Windows\explorer.exe /e /root,"_Directory
	} Else {
		Set Cmd = "C:\Windows\explorer.exe /e,/select,"_Path
	}
	
	Quit Cmd
]]></Implementation>
</Method>
</Class>
</Export>
